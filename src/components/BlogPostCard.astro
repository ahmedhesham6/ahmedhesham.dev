---
import FormattedDate from './FormattedDate.astro';
import Tag from './Tag.astro';

interface Props {
  post: {
    id: string;
    data: {
      title: string;
      pubDate: Date;
      description: string;
      tags?: string[];
    };
  };
}

const { post } = Astro.props;
const tags = post.data.tags ?? [];
---

<a
  href={`/blog/${post.id}/`}
  class="card-glow group relative -mx-3 flex flex-col gap-2 overflow-hidden px-3 py-4 transition-all duration-200 hover:bg-[var(--color-bg-secondary)]"
  style={`border-radius: var(--radius-lg)`}
>
  <div
    class="absolute left-0 top-3 bottom-3 w-0.5 rounded-full opacity-0 transition-opacity duration-200 group-hover:opacity-100"
    style="background: var(--gradient-accent)"
    aria-hidden="true"
  ></div>
  <div class="flex items-baseline justify-between gap-4">
    <span class="min-w-0 truncate font-medium group-hover:text-accent-500 transition-colors duration-200">
      {post.data.title}
    </span>
    <span class="shrink-0 text-sm tabular-nums text-[var(--color-text-tertiary)]">
      <FormattedDate date={post.data.pubDate} />
    </span>
  </div>
  <p class="text-sm text-[var(--color-text-secondary)] line-clamp-1">
    {post.data.description}
  </p>
  {tags.length > 0 && (
    <div class="flex flex-wrap gap-1.5 pt-0.5">
      {tags.map((t) => (
        <Tag tag={t} linked={false} />
      ))}
    </div>
  )}
</a>
